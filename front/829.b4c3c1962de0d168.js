"use strict";(self.webpackChunkangular_toursapp=self.webpackChunkangular_toursapp||[]).push([[829],{7936:(v,h,s)=>{s.d(h,{M:()=>m});var n=s(4650),u=s(9299),t=s(6895);let p=(()=>{class l{constructor(c,T){this.router=c,this.location=T,this.history=[],this.router.events.subscribe(f=>{f instanceof u.m2&&this.history.push(f.urlAfterRedirects)})}back(){this.history.pop(),this.history.length>0?this.location.back():this.router.navigateByUrl("/")}}return l.\u0275fac=function(c){return new(c||l)(n.LFG(u.F0),n.LFG(t.Ye))},l.\u0275prov=n.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var d=s(4859),a=s(7392);let m=(()=>{class l{constructor(c){this.navigation=c,this.viewTitle=""}ngOnInit(){}back(){this.navigation.back()}}return l.\u0275fac=function(c){return new(c||l)(n.Y36(p))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-back-title-button"]],inputs:{viewTitle:"viewTitle"},decls:6,vars:1,consts:[[1,"back-title-body"],["mat-icon-button","",3,"click"],[1,"view-title"]],template:function(c,T){1&c&&(n.TgZ(0,"div",0)(1,"button",1),n.NdJ("click",function(){return T.back()}),n.TgZ(2,"mat-icon"),n._uU(3,"arrow_back"),n.qZA()(),n.TgZ(4,"p",2),n._uU(5),n.qZA()()),2&c&&(n.xp6(5),n.Oqu(T.viewTitle))},dependencies:[d.lW,a.Hw],styles:[".back-title-body[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.back-title-body[_ngcontent-%COMP%]   .view-title[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:18px}"]}),l})()},4202:(v,h,s)=>{s.d(h,{T:()=>t});var n=s(4650);let u=(()=>{class p{constructor(a){this.host=a,this.width="",this.height="",this.className=""}ngOnInit(){const a=this.host.nativeElement;this.className&&a.classList.add(this.className),a.style.setProperty("--app-skeleton-loader-width",this.width??"100%"),a.style.setProperty("--app-skeleton-loader-height",this.height??"20px")}}return p.\u0275fac=function(a){return new(a||p)(n.Y36(n.SBq))},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-skeleton-loader"]],hostAttrs:[1,"pulse"],decls:0,vars:0,template:function(a,m){},styles:["[_nghost-%COMP%]{margin-bottom:12px;display:block;width:var(--app-skeleton-loader-width);height:var(--app-skeleton-loader-height);background:#eee no-repeat;background:linear-gradient(110deg,#ececec 8%,#f5f5f5 18%,#ececec 33%);animation:1.5s shine linear infinite;background-size:200% 100%;border-radius:10px}@keyframes shine{to{background-position-x:-200%}}"]}),p})(),t=(()=>{class p{constructor(a,m){this.tpl=a,this.vcr=m,this.isLoading=!1,this.size=1,this.width="",this.height="",this.className=""}ngOnChanges(a){a.isLoading&&(this.vcr.clear(),a.isLoading.currentValue?Array.from({length:this.size}).forEach(()=>{const m=this.vcr.createComponent(u);Object.assign(m.instance,{width:this.width,height:this.height,className:this.className})}):this.vcr.createEmbeddedView(this.tpl))}}return p.\u0275fac=function(a){return new(a||p)(n.Y36(n.Rgc),n.Y36(n.s_b))},p.\u0275dir=n.lG2({type:p,selectors:[["","skeleton",""]],inputs:{isLoading:["skeleton","isLoading"],size:["skeletonRepeat","size"],width:["skeletonWidth","width"],height:["skeletonHeight","height"],className:["skeletonClassName","className"]},features:[n.TTD]}),p})()},2829:(v,h,s)=>{s.r(h),s.d(h,{TourPriceModule:()=>ot});var n=s(6895),u=s(9299),t=s(4650),p=s(2340),d=s(529);let a=(()=>{class o{constructor(e){this.http=e,this.apiURL=p.N.apiURL}getTours(){return this.http.get(`${this.apiURL}rides`)}getTour(e){return this.http.get(`${this.apiURL}rides/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var m=s(4463),l=s(7936),g=s(4202),c=s(4077),T=s(4374),f=s(3238);function C(o,i){1&o&&t._UZ(0,"img",5),2&o&&t.Q6J("src",i.$implicit.imageURL,t.LSH)}let k=(()=>{class o{constructor(){this.tourType="",this.tourName="",this.url=["",0],this.tourPlaces=[]}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-list-item"]],inputs:{tourType:"tourType",tourName:"tourName",url:"url",tourPlaces:"tourPlaces"},decls:8,vars:8,consts:[["matRipple","",1,"list-item-body","mat-card",3,"routerLink"],[1,"tour-class","mat-caption"],[1,"tour-name","mat-h3"],[1,"route-images"],["class","route-image","alt","",3,"src",4,"ngFor","ngForOf"],["alt","",1,"route-image",3,"src"]],template:function(e,r){1&e&&(t.TgZ(0,"a",0)(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,C,1,1,"img",4),t.ALo(7,"slice"),t.qZA()()),2&e&&(t.Q6J("routerLink",r.url),t.xp6(2),t.Oqu(r.tourType),t.xp6(2),t.Oqu(r.tourName),t.xp6(2),t.Q6J("ngForOf",t.Dn7(7,4,r.tourPlaces,0,3)))},dependencies:[n.sg,u.yS,f.wG,n.OU],styles:[".list-item-body[_ngcontent-%COMP%]{width:100%;display:block;padding:6px;box-sizing:border-box;height:136px;text-decoration:none;box-shadow:none;border-radius:12px}.list-item-body[_ngcontent-%COMP%]   .tour-class[_ngcontent-%COMP%]{color:gray;display:block}.list-item-body[_ngcontent-%COMP%]   .tour-name[_ngcontent-%COMP%]{line-height:20px;font-weight:500;text-overflow:ellipsis;overflow-wrap:anywhere;height:40px;overflow:hidden;margin-bottom:6px}.list-item-body[_ngcontent-%COMP%]   .route-images[_ngcontent-%COMP%]{display:flex;width:100%;gap:6px}.list-item-body[_ngcontent-%COMP%]   .route-images[_ngcontent-%COMP%]   .route-image[_ngcontent-%COMP%]{width:36px;height:58px;object-fit:cover;border-radius:4px}"]}),o})();const y=function(o){return["/services/tour-prices",o]};function P(o,i){if(1&o&&t._UZ(0,"app-tour-list-item",2),2&o){const e=i.$implicit;t.Q6J("url",t.VKq(4,y,e._id))("tourType",e.type)("tourName",e.name)("tourPlaces",e.places)}}let w=(()=>{class o{constructor(){this.tours=[]}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-list"]],inputs:{tours:"tours"},decls:2,vars:1,consts:[[1,"wrapper"],[3,"url","tourType","tourName","tourPlaces",4,"ngFor","ngForOf"],[3,"url","tourType","tourName","tourPlaces"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,P,1,6,"app-tour-list-item",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",r.tours))},dependencies:[n.sg,k],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:6px}@media (min-width: 600px){.wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]}),o})();function L(o,i){if(1&o&&t._UZ(0,"app-tour-list",7),2&o){const e=t.oxw(2);t.Q6J("tours",e.tours)}}function R(o,i){if(1&o&&(t.TgZ(0,"div",3)(1,"div",4),t._UZ(2,"app-filter-buttons-group"),t.qZA(),t.TgZ(3,"div",5),t.YNc(4,L,1,1,"app-tour-list",6),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("skeleton",e.isLoading)("skeletonHeight","180px")("skeletonRepeat",2)("skeletonWidth","100%")}}function O(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"app-error-message",8),t.NdJ("reload",function(){t.CHM(e);const _=t.oxw();return t.KtG(_.getTours())}),t.qZA()}}let S=(()=>{class o{constructor(e,r){this.tourService=e,this.translate=r,this.pageTitle="",this.tours=[],this.isLoading=!0,this.isError=!1}ngOnInit(){this.getTours(),this.translatePage()}getTours(){this.isLoading=!0,this.isError=!1,this.tourService.getTours().subscribe({next:e=>this.tours=e,error:e=>{console.log(e),this.isError=!0,this.isLoading=!1},complete:()=>this.isLoading=!1})}translatePage(){this.translate.get("TOURIST_SERVICES.TRAVELS_RIDES.LIST").subscribe({next:e=>{this.pageTitle=e.TITLE}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a),t.Y36(m.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tours-page"]],decls:3,vars:3,consts:[[3,"viewTitle"],["class","wrapper",4,"ngIf"],[3,"reload",4,"ngIf"],[1,"wrapper"],[1,"filters-list"],[1,"tours-list"],[3,"tours",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[3,"tours"],[3,"reload"]],template:function(e,r){1&e&&(t._UZ(0,"app-back-title-button",0),t.YNc(1,R,5,4,"div",1),t.YNc(2,O,1,0,"app-error-message",2)),2&e&&(t.Q6J("viewTitle",r.pageTitle),t.xp6(1),t.Q6J("ngIf",!r.isError),t.xp6(1),t.Q6J("ngIf",r.isError))},dependencies:[n.O5,l.M,g.T,c.H,T.J,w],styles:[".wrapper[_ngcontent-%COMP%]{width:100%}@media (min-width: 600px){.wrapper[_ngcontent-%COMP%]{display:flex;gap:12px}.filters-list[_ngcontent-%COMP%]{min-width:270px;width:380px}.tours-list[_ngcontent-%COMP%]{max-width:1366px;width:100%;margin:0 auto}}"]}),o})();var Z=s(3900);let b=(()=>{class o{constructor(e){this.http=e,this.apiURL=p.N.apiURL}getRoutes(){return this.http.get(`${this.apiURL}routes`)}getRoute(e){return this.http.get(`${this.apiURL}routes/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=s(7011);let M=(()=>{class o{constructor(){this.type="",this.name="",this.description=""}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-details-heading"]],inputs:{type:"type",name:"name",description:"description"},decls:6,vars:3,consts:[[1,"tour-type","mat-caption"],[1,"tour-name","mat-h2"],[1,"tour-description","mat-body"]],template:function(e,r){1&e&&(t.TgZ(0,"span",0),t._uU(1),t.qZA(),t.TgZ(2,"p",1),t._uU(3),t.qZA(),t.TgZ(4,"p",2),t._uU(5),t.qZA()),2&e&&(t.xp6(1),t.Oqu(r.type),t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Oqu(r.description))},styles:[".tour-type[_ngcontent-%COMP%]{color:gray}.tour-name[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;line-height:24px}"]}),o})();var D=s(6435);let N=(()=>{class o{constructor(){this.price="0"}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-details-price"]],inputs:{price:"price"},decls:1,vars:1,consts:[["title","Recorrido",3,"text"]],template:function(e,r){1&e&&t._UZ(0,"app-details-price-text",0),2&e&&t.Q6J("text",r.price)},dependencies:[D.s]}),o})(),I=(()=>{class o{constructor(){this.imageUrl=""}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-details-picture"]],inputs:{imageUrl:"imageUrl"},decls:1,vars:1,consts:[["alt","",1,"tour-image",3,"src"]],template:function(e,r){1&e&&t._UZ(0,"img",0),2&e&&t.Q6J("src",r.imageUrl,t.LSH)},styles:[".tour-image[_ngcontent-%COMP%]{display:block;width:100%;aspect-ratio:4/3;object-fit:cover;margin-bottom:12px}"]}),o})();function J(o,i){1&o&&t._UZ(0,"img",2),2&o&&t.Q6J("src",i.$implicit.imageURL,t.LSH)}let E=(()=>{class o{constructor(){this.places=[]}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-details-places"]],inputs:{places:"places"},decls:2,vars:1,consts:[[1,"wrapper"],["class","tour-place","alt","",3,"src",4,"ngFor","ngForOf"],["alt","",1,"tour-place",3,"src"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,J,1,1,"img",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",r.places))},dependencies:[n.sg],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;gap:6px;overflow:auto}.wrapper[_ngcontent-%COMP%]   .tour-place[_ngcontent-%COMP%]{aspect-ratio:1;width:90px;object-fit:cover;height:100%}"]}),o})();var x=s(8407),F=s(3835),A=s(961);let Q=(()=>{class o{constructor(e){this.mapService=e,this.lat=0,this.lon=0,this.routeLayer=x.geoJSON(this.route)}ngAfterViewInit(){this.getRouteLine()}getRouteLine(){x.geoJSON(this.route).addTo(this.mapService.getMapInstance());const e=x.geoJSON(this.route).getBounds();this.mapService.getMapInstance().fitBounds(e),console.log(e)}setMapLocation(){this.mapService.getMapInstance().setView(x.latLng(10.4311363,-75.5440975),14)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F.S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-details-route"]],inputs:{lat:"lat",lon:"lon",route:"route"},decls:1,vars:0,consts:[[1,"map-container"]],template:function(e,r){1&e&&t._UZ(0,"app-map",0)},dependencies:[A.G]}),o})();function Y(o,i){if(1&o&&t._UZ(0,"app-tour-details-picture",14),2&o){const e=t.oxw(2);t.Q6J("imageUrl",e.tour.imgURL)}}function H(o,i){if(1&o&&t._UZ(0,"app-tour-details-heading",15),2&o){const e=t.oxw(2);t.Q6J("name",e.tour.name)("type",e.tour.type)("description",e.tour.description)}}function W(o,i){if(1&o&&t._UZ(0,"app-details-separator",16),2&o){const e=t.oxw(2);t.Q6J("title",e.separatorText[0].text)}}function B(o,i){if(1&o&&t._UZ(0,"app-tour-details-price",17),2&o){const e=t.oxw(2);t.Q6J("price",e.tour.price)}}function z(o,i){if(1&o&&t._UZ(0,"app-details-separator",16),2&o){const e=t.oxw(2);t.Q6J("title",e.separatorText[2].text)}}function X(o,i){if(1&o&&t._UZ(0,"app-tour-details-places",18),2&o){const e=t.oxw(2);t.Q6J("places",e.tour.places)}}function G(o,i){1&o&&t._UZ(0,"app-details-separator",19)}function V(o,i){if(1&o&&t._UZ(0,"app-tour-details-route",20),2&o){const e=t.oxw(2);t.Q6J("route",e.route)}}function $(o,i){if(1&o&&(t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,Y,1,1,"app-tour-details-picture",5),t.TgZ(3,"div",6),t.YNc(4,H,1,3,"app-tour-details-heading",7),t.YNc(5,W,1,1,"app-details-separator",8),t.YNc(6,B,1,1,"app-tour-details-price",9),t.YNc(7,z,1,1,"app-details-separator",8),t.YNc(8,X,1,1,"app-tour-details-places",10),t.qZA()(),t.TgZ(9,"div",11),t.YNc(10,G,1,0,"app-details-separator",12),t.YNc(11,V,1,1,"app-tour-details-route",13),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("skeleton",e.isLoading)("skeletonHeight","260px")("skeletonRepeat",1)("skeletonWidth","100%"),t.xp6(2),t.Q6J("skeleton",e.isLoading)("skeletonHeight","190px")("skeletonRepeat",1)("skeletonWidth","100%"),t.xp6(1),t.Q6J("skeleton",e.isLoading)("skeletonHeight","20px")("skeletonRepeat",1)("skeletonWidth","60px"),t.xp6(1),t.Q6J("skeleton",e.isLoading)("skeletonHeight","20px")("skeletonRepeat",1)("skeletonWidth","110px"),t.xp6(1),t.Q6J("skeleton",e.isLoading)("skeletonHeight","20px")("skeletonRepeat",1)("skeletonWidth","60px"),t.xp6(1),t.Q6J("skeleton",e.isLoading)("skeletonHeight","120px")("skeletonRepeat",1)("skeletonWidth","100%"),t.xp6(2),t.Q6J("skeleton",e.isLoading)("skeletonHeight","20px")("skeletonRepeat",1)("skeletonWidth","60px"),t.xp6(1),t.Q6J("skeleton",e.isLoading)("skeletonHeight","260px")("skeletonRepeat",1)("skeletonWidth","100%")}}function j(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"app-error-message",21),t.NdJ("reload",function(){t.CHM(e);const _=t.oxw();return t.KtG(_.getTour())}),t.qZA()}}const K=[{path:"",component:S},{path:":id",component:(()=>{class o{constructor(e,r,_,it){this.tourService=e,this.routeService=r,this.activatedRoute=_,this.translate=it,this.pageTitle="",this.separatorText=[],this.tourId="",this.isError=!1,this.isLoading=!0,this.tour={_id:"",description:"",name:"",places:[],price:"",type:"",imgURL:"",duration:{finish:0,start:0,time:""},route_id:""},this.route={features:[],type:"FeatureCollection"}}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.tourId=e.id,this.getTour()}),this.translatePage()}getTour(){this.isError=!1,this.isLoading=!0,this.tourService.getTour(this.tourId).pipe((0,Z.w)(e=>(this.tour=e,this.routeService.getRoute(e.route_id)))).subscribe({next:e=>this.route=e,error:e=>{this.isError=!0,this.isLoading=!1,console.error(e)},complete:()=>this.isLoading=!1})}translatePage(){this.translate.get("TOURIST_SERVICES.TRAVELS_RIDES.DETAILS").subscribe({next:e=>{this.pageTitle=e.TITLE_TOUR,this.separatorText.push({text:e.PRICES_SEPARATOR_TEXT},{text:e.ROUTE_SEPARATOR_TEXT},{text:e.PLACES_SEPARATOR_TEXT})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a),t.Y36(b),t.Y36(u.gz),t.Y36(m.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tour-details-page"]],decls:3,vars:3,consts:[[3,"viewTitle"],["class","wrapper",4,"ngIf"],[3,"reload",4,"ngIf"],[1,"wrapper"],[1,"top-info"],["class","image-side",3,"imageUrl",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[1,"details-side"],[3,"name","type","description",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[3,"title",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[3,"price",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[3,"places",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[1,"bottom-info"],["title","Recorrido",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],["class","image-side",3,"route",4,"skeleton","skeletonHeight","skeletonRepeat","skeletonWidth"],[1,"image-side",3,"imageUrl"],[3,"name","type","description"],[3,"title"],[3,"price"],[3,"places"],["title","Recorrido"],[1,"image-side",3,"route"],[3,"reload"]],template:function(e,r){1&e&&(t._UZ(0,"app-back-title-button",0),t.YNc(1,$,12,32,"div",1),t.YNc(2,j,1,0,"app-error-message",2)),2&e&&(t.Q6J("viewTitle",r.pageTitle),t.xp6(1),t.Q6J("ngIf",!r.isError),t.xp6(1),t.Q6J("ngIf",r.isError))},dependencies:[n.O5,l.M,g.T,c.H,U.u,M,N,I,E,Q],styles:["@media (min-width: 600px){.wrapper[_ngcontent-%COMP%]{max-width:1150px;margin:0 auto}.top-info[_ngcontent-%COMP%]{display:flex;gap:24px;justify-content:center}.image-side[_ngcontent-%COMP%]{min-width:280px;width:500px}.details-side[_ngcontent-%COMP%]{min-width:280px;width:600px;max-width:490px;margin:0 0 0 auto}}"]}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(K),u.Bz]}),o})();var tt=s(4466),et=s(3366);let ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[n.ez,q,tt.m,f.si,et.MapModule]}),o})()}}]);